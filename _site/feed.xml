<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
<generator uri="http://jekyllrb.com" version="3.0.3">Jekyll</generator>
<link href="/feed.xml" rel="self" type="application/atom+xml" />
<link href="/" rel="alternate" type="text/html" />
<updated>2018-01-17T20:40:50+01:00</updated>
<id>/</id>
<title>Yifan Jiang</title>
<subtitle>My personal homepage.</subtitle>
<author>
<name>Yifan Jiang</name>
</author>
<entry>
<title>Dairy</title>
<link href="/post/Dairy-2017-2018/" rel="alternate" type="text/html" title="Dairy" />
<published>2017-02-25T00:00:00+01:00</published>
<updated>2017-02-25T00:00:00+01:00</updated>
<id>/post/Dairy-2017-2018</id>
<content type="html" xml:base="/post/Dairy-2017-2018/">&lt;p&gt;A dairy-like record of interesting moments in my life~ I’ll keep updating ~&lt;/p&gt;

&lt;h2 id=&quot;sep-2017&quot;&gt;Sep 2017&lt;/h2&gt;
&lt;p&gt;An interesting jorney has ended, and another one must start. Having finished the internship at Maxon Motor, it’s time to go back to school and be academic again :)&lt;/p&gt;

&lt;p&gt;About the internship, there is so much to love about it. I’ve got a lovely workplace, friendly and helpful colleagues, and a ton of interesting motors to work with. Now I’ve really got to know motors and drivers as well as my fingers, and my German did improve a lot. Not to mention that at the end of the job my colleagues gave me the most special gift I’ve ever received! Can’t love it more.&lt;/p&gt;

&lt;p&gt;Worth mentioning, I’ve also started a project of my own, to develop a motor control platform. The target is to develop a controller for 3-phase PMSM, capable of executing current, speed, and position control. It will be able to control a series elastic actuator (SEA). Development has already started on a development kit, and the design of in-house hardware platform is underway. Hopefully a full solution can be turned out next year.&lt;/p&gt;

&lt;p&gt;Back in school, still a ton of work is waiting for me. A few courses, my small thesis, and finding a job. The small thesis is particularly interesting for me. It’s about the modeling and control of a series elastic actuator (SEA), which is a special type of motor that’s particularly useful for robots that have to interact safely with human. Given the boom in cobot market that everybody envisions, SEA is a technology with big potentials. Really excited to work on it!&lt;/p&gt;

&lt;h2 id=&quot;feb-2017&quot;&gt;Feb 2017&lt;/h2&gt;
&lt;p&gt;End of February is the begining of a new journey! Last December I got an offer for an internship at the world-famous Maxon Motor AG! Excited for quite a while, and I’m soon going to start it! Really like the company’s nice location and huge lab, dream of all engineers~.&lt;/p&gt;

&lt;p&gt;My part-time job at RSL has also come to an end. Must say it’s a nice experience, in which I learned a ton of things about electronics, system integration, team working, and much more. The people are supper nice and supportive, a great part of the job. Although it’s a bit stressful sometimes, it’s not too bad, and I’m happy in the end. Hope to do my semester project or thesis with them, would be a great option!&lt;/p&gt;

&lt;figure&gt;
    &lt;a href=&quot;/images/Life-Collection/2017-01-maxon.jpg&quot;&gt;&lt;img src=&quot;/images/Life-Collection/2017-01-maxon.jpg&quot; /&gt;&lt;/a&gt;
&lt;/figure&gt;

&lt;h2 id=&quot;jan-2017&quot;&gt;Jan 2017&lt;/h2&gt;
&lt;p&gt;Have been doing a part-time job at ETH’s famous Robotic System Lab (RSL) for a few months, a fantastic experience! RSL is among the world’s best labs that study quadrupedal robots, or “robotic dogs” as I like call them. It’s really exciting to see it walk and jump. Digging deep into the low-level control systems for the robot is also full of fun.&lt;/p&gt;
&lt;figure&gt;
    &lt;a href=&quot;/images/Life-Collection/2017-01-me-with-dog.jpg&quot;&gt;&lt;img src=&quot;/images/Life-Collection/2017-01-me-with-dog.jpg&quot; /&gt;&lt;/a&gt;
&lt;/figure&gt;
</content>
<category term="Hobby" />
<category term="life" />
<summary>A dairy-like record of interesting moments in my life~ I’ll keep updating ~</summary>
</entry>
<entry>
<title>Dairy Archive</title>
<link href="/post/Dairy-Archive/" rel="alternate" type="text/html" title="Dairy Archive" />
<published>2016-08-21T00:00:00+02:00</published>
<updated>2016-08-21T00:00:00+02:00</updated>
<id>/post/Dairy-Archive</id>
<content type="html" xml:base="/post/Dairy-Archive/">&lt;h2 id=&quot;section&quot;&gt;2016&lt;/h2&gt;
&lt;p&gt;Travelling to Dawson city in Canada, a small town that took shape in early the 20th century because of the famous gold rush. Although it still produces some gold today, the town has almost lost its past glories. Glad to have found this nice slide rule in an antique shop in Dawson. I’ve wanted to own a slide rule for a long time. This little piece of history brings me back to the days before calculators, a deep emotional connection.&lt;/p&gt;
&lt;figure&gt;
    &lt;a href=&quot;/images/Life-Collection/2016-08-20-slide-rule.jpg&quot;&gt;&lt;img src=&quot;/images/Life-Collection/2016-08-20-slide-rule.jpg&quot; /&gt;&lt;/a&gt;
&lt;/figure&gt;

&lt;h2 id=&quot;section-1&quot;&gt;2014&lt;/h2&gt;
&lt;p&gt;Travelled to probably the most mysterious country in the world, Turkey. Previously only existed in stories and fairy tales, being so close to it made me feel unreal.&lt;/p&gt;

&lt;p&gt;Being in Istanbul itself is like being in fairy tale: the churches and mosques, the calls for prayer from minarets, the old streets and dessert shops, everything seems frozen back in time, just as they were hundreds (or thousands) of years ago. History makes this city romantic, maybe even dog and cat can fall in love~&lt;/p&gt;

&lt;figure class=&quot;half&quot;&gt;
    &lt;a href=&quot;/images/Life-Collection/turkey-1.jpg&quot;&gt;&lt;img src=&quot;/images/Life-Collection/turkey-1.jpg&quot; /&gt;&lt;/a&gt;
    &lt;a href=&quot;/images/Life-Collection/turkey-cat-dog.jpg&quot;&gt;&lt;img src=&quot;/images/Life-Collection/turkey-cat-dog.jpg&quot; /&gt;&lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;In Turkey there are many ducks, and strangely people don’t eat them. Instead they are pretty generously fed (in an unhealthy diet though). Like in Pamukkale, people enjoy feeding ducks with bread.&lt;/p&gt;
&lt;figure&gt;
    &lt;a href=&quot;/images/Life-Collection/turkey-feed-duck.jpg&quot;&gt;&lt;img src=&quot;/images/Life-Collection/turkey-feed-duck.jpg&quot; /&gt;&lt;/a&gt;
&lt;/figure&gt;

&lt;h2 id=&quot;section-2&quot;&gt;2013&lt;/h2&gt;
&lt;p&gt;My first time in Canada, everything seemed so friendly to me. In the morning of my first day at Montreal, I saw some surprisingly beautiful patterns of frozen moisture, right on the window! Squirrels seem to like me as well, or did this one mistook my leg for a tree?&lt;/p&gt;

&lt;figure class=&quot;half&quot;&gt;
    &lt;a href=&quot;/images/Life-Collection/Montreal-ice.JPG&quot;&gt;&lt;img src=&quot;/images/Life-Collection/Montreal-ice.JPG&quot; /&gt;&lt;/a&gt;
    &lt;a href=&quot;/images/Life-Collection/Montreal-squirrel.jpg&quot;&gt;&lt;img src=&quot;/images/Life-Collection/Montreal-squirrel.jpg&quot; /&gt;&lt;/a&gt;
&lt;/figure&gt;
</content>
<category term="Hobby" />
<category term="life" />
<summary>2016Travelling to Dawson city in Canada, a small town that took shape in early the 20th century because of the famous gold rush. Although it still produces some gold today, the town has almost lost its past glories. Glad to have found this nice slide rule in an antique shop in Dawson. I’ve wanted to own a slide rule for a long time. This little piece of history brings me back to the days before calculators, a deep emotional connection.    </summary>
</entry>
<entry>
<title>My First Home Made HiFi Audio Decoder and Amplifier</title>
<link href="/post/Audio-Decoder/" rel="alternate" type="text/html" title="My First Home Made HiFi Audio Decoder and Amplifier" />
<published>2016-07-28T00:00:00+02:00</published>
<updated>2016-07-28T00:00:00+02:00</updated>
<id>/post/Audio-Decoder</id>
<content type="html" xml:base="/post/Audio-Decoder/">&lt;p&gt;Recently I developed my first in-house hi-fi audio decoder + amplifier project. Having tested it with my own ears I was very much surprised by the outstanding sound quality. Considering the fact that this project has costed me less than 300 HKD (thanks to cheap PCBs from Shenzhen), I am sooooo happy with the result! It has a name: “JAudio Decoder Amp”&lt;/p&gt;

&lt;h2 id=&quot;the-design&quot;&gt;The Design&lt;/h2&gt;

&lt;p&gt;To realise this project with simple techniques and low budget, I selected a number of good-quality yet easy-to-use chips to base my design on.&lt;/p&gt;

&lt;p&gt;I used &lt;a href=&quot;http://www.ti.com/product/PCM2707&quot;&gt;PCM2707&lt;/a&gt; computer interface chip + decoder + DAC. PCM2707 is a USB audio interface that enables music playback through USB. In addition to that it also has a built-in DAC that can convert 16-bit 44 kHz sound source with down to 0.006% THD into line. 16-bit 44kHz is standard CD-quality sound source, which I believe is the highest quality sound source that I can get most of the time. So I would not bother myself to use higher-quality DAC chips, which costs more and makes the design more complicated.&lt;/p&gt;

&lt;p&gt;The built-in DAC of PCM 2707 can directly drive headphones with 32 ohm impedance, but the THD would be higher this way. Wanting to further improve sound quality, I used &lt;a href=&quot;http://www.ti.com/product/TPA6120A2&quot;&gt;TPA6120&lt;/a&gt; audio amplifier as output buffer. The amplifier is supplied with +5V ~ -5V, and the gain is set to 1.5V/V.&lt;/p&gt;

&lt;p&gt;To generate the -5V required to drive TPA6120, a switch mode voltage converter, LM2594, was employeed to convert +5V (from USB Vbus) to -5V.&lt;/p&gt;

&lt;p&gt;All 3 devices come from IT. Check data sheets for details and application information.&lt;/p&gt;

&lt;p&gt;The complete and most updated schematic is shown in Fig.1, alone with some layout considerations.&lt;/p&gt;

&lt;figure&gt;
    &lt;a href=&quot;/images/2016-07-31-Audio-Decoder/sch.png&quot;&gt;&lt;img src=&quot;/images/2016-07-31-Audio-Decoder/sch.png&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;Fig.1 Schematic&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h2 id=&quot;the-pcb&quot;&gt;The PCB&lt;/h2&gt;
&lt;p&gt;The PCB layout was created based on the schematic in Fig.1. It’s a 2-layer PCB, and it features separated ground panels for digital and analog circuitries, which helps reduce cross-over noise. According to the data sheet of TPA60120, for stable operation and optimum performance, there should be no ground panel underneath the output and feed-back pins of the IC. This recommendation was very well implemented. In addition, the output and feed-back paths were made as short as possible.&lt;/p&gt;

&lt;p&gt;The design of the PCB is shown in Fig.2 and Fig.3.&lt;/p&gt;

&lt;figure class=&quot;half&quot;&gt;
    &lt;a href=&quot;/images/2016-07-31-Audio-Decoder/pcb-top.png&quot;&gt;&lt;img src=&quot;/images/2016-07-31-Audio-Decoder/pcb-top.png&quot; /&gt;&lt;/a&gt;
    &lt;a href=&quot;/images/2016-07-31-Audio-Decoder/pcb-bot.png&quot;&gt;&lt;img src=&quot;/images/2016-07-31-Audio-Decoder/pcb-bot.png&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;Fig.2 PCB, top layer&lt;/figcaption&gt;
    &lt;figcaption&gt;Fig.3 PCB, bottom layer&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h2 id=&quot;the-final-product&quot;&gt;The Final Product&lt;/h2&gt;
&lt;p&gt;After a few hours of assembly and some hardware debugging, my computer finally successfully recognized the chip, and sound flowed out like water. It has a crystal clear high-frequency, and rich mid-frequency, and decent low-frequency. The response is quite flat, being totally loyal to the original recording. When the music is off, there is no noise what so ever. I made a 5-minute comparison between my laptop’s audio output and this decoder. There is subtle differences, and the later offers clearer sound. From first impression I like my decoder better.&lt;/p&gt;

&lt;p&gt;I used my Beyerdynamics DT880 headphone (32ohm version) for the above testings.&lt;/p&gt;

&lt;p&gt;Haven’t washed the PCB yet, still covered with flux. But here is the final product (Fig.4 and 5).&lt;/p&gt;
&lt;figure class=&quot;half&quot;&gt;
    &lt;a href=&quot;/images/2016-07-31-Audio-Decoder/final-product.jpg&quot;&gt;&lt;img src=&quot;/images/2016-07-31-Audio-Decoder/final-product.jpg&quot; /&gt;&lt;/a&gt;
    &lt;a href=&quot;/images/2016-07-31-Audio-Decoder/testing.jpg&quot;&gt;&lt;img src=&quot;/images/2016-07-31-Audio-Decoder/testing.jpg&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;Fig.4 (Left) JAudio Decoder Amp, Finished Product&lt;/figcaption&gt;
    &lt;figcaption&gt;Fig.5 (Right) Listening Test&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;There are minor problems with the board. First, sometimes my computer fails to recognize PCM2707, because of power supply instability at power-up. PCM2707 is supplied with 5V USB bus voltage, and its internal voltage regulator generates the 3.3V voltage needed for its internal operations. The internal voltage regulator, however, occasionally exhibits instability at power-up, causing the device to malfunction. The cause of the instability is the inadequate value of decoupling capacitor. I added as much as I could, and the device could function normally 90% of the time. Second, the power and status indicator LEDs have different brightnesses, which is kind of annoying.&lt;/p&gt;

&lt;p&gt;I made a cute little case for my decoder and amplifier, using a Snoopy pencil case. Look very nice, feel better to the touch!&lt;/p&gt;
&lt;figure class=&quot;half&quot;&gt;
    &lt;a href=&quot;/images/2016-07-31-Audio-Decoder/case-1.jpg&quot;&gt;&lt;img src=&quot;/images/2016-07-31-Audio-Decoder/case-1.jpg&quot; /&gt;&lt;/a&gt;
    &lt;a href=&quot;/images/2016-07-31-Audio-Decoder/case-2.jpg&quot;&gt;&lt;img src=&quot;/images/2016-07-31-Audio-Decoder/case-2.jpg&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;Fig.6 (Left) JAudio Decoder Amp, In a Lovely Case&lt;/figcaption&gt;
    &lt;figcaption&gt;Fig.7 (Right) In Use&lt;/figcaption&gt;
&lt;/figure&gt;

</content>
<category term="Hobby" />
<category term="DIY" />
<summary>Recently I developed my first in-house hi-fi audio decoder + amplifier project. Having tested it with my own ears I was very much surprised by the outstanding sound quality. Considering the fact that this project has costed me less than 300 HKD (thanks to cheap PCBs from Shenzhen), I am sooooo happy with the result! It has a name: “JAudio Decoder Amp”</summary>
</entry>
<entry>
<title>UAV Communication Relay for another UAV</title>
<link href="/post/UAV-Communication-Relay-for-another-UAV/" rel="alternate" type="text/html" title="UAV Communication Relay for another UAV" />
<published>2016-05-30T00:00:00+02:00</published>
<updated>2016-05-30T00:00:00+02:00</updated>
<id>/post/UAV-Communication-Relay-for-another-UAV</id>
<content type="html" xml:base="/post/UAV-Communication-Relay-for-another-UAV/">&lt;p&gt;This project is my undergraduate final year project, and I wrote my undergraduate thesis out of it. Hopefully this short article will give you a brief idea about what I’ve done. This project was a teamwork, I could not complete it without my team mates Cai Lingfeng and Wan Hiu Fung. I would also like to thank our supervisor Prof Wen Chih Yung, an absolutely nice and helpful prof.&lt;/p&gt;

&lt;p&gt;This project has helped us win &lt;strong&gt;champion&lt;/strong&gt; at the &lt;a href=&quot;http://www.iaa.ncku.edu.tw/~whlai/uav/2016/index.html&quot;&gt;2016 Taiwan Unmanned Aircraft Design Competition&lt;/a&gt; (website in Chinese), in which we take great pride. we are also looking to publish a paper based on it.&lt;/p&gt;

&lt;h2 id=&quot;the-idea&quot;&gt;The Idea&lt;/h2&gt;

&lt;p style=&quot;text-align: center;&quot;&gt;&lt;strong&gt;Why do we need radio communication ?&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;If your UAV goes out for a mission, you want to make sure that you can contact the UAV at any time, to send commands to it, and to know what it is doing. There are two reasons for this. The first one is also the most obvious: if you cannot even contact your UAV, how can you do the mission with it? The second one is, if you lose contact with your UAV, your UAV may do unexpected actions without you knowing it, such actions can damage properties, and can ever hurt or kill somebody.&lt;/p&gt;

&lt;p&gt;The choice of radio over other technologies such as WiFi or 3G/4G mobile network is made for 2 reasons:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Radio has longer range than WiFi &lt;/li&gt;
  &lt;li&gt;Radio has shorter (and more predictable) delay than 3G/4G &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Although radio generally has lower data rates.&lt;/p&gt;

&lt;p style=&quot;text-align: center;&quot;&gt;&lt;strong&gt;Why relaying radio communication ?&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;If your UAV does a mission in areas where you cannot directly, does it mean you have to abort the mission? With traditional UAV systems, yes. But with radio communication relay, NO! With the help of radio communication relay, the UAV can fly into areas where direct radio communication with you is blocked.&lt;/p&gt;

&lt;p&gt;This idea is illustrated in Fig.1. If radio communication is blocked by, say, a mountain, then the use of relay can easily help us get arround the obstacle. In addition, relay can also help extend the range of communication, so you can go further with a radio transceiver of smaller power.&lt;/p&gt;

&lt;figure&gt;
    &lt;a href=&quot;/images/2016-05-30-UAV-Communication-Relay-for-another-UAV/idea.png&quot;&gt;&lt;img src=&quot;/images/2016-05-30-UAV-Communication-Relay-for-another-UAV/idea.png&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;Fig.1 UAV Radio Communication Relay&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h2 id=&quot;system-architecture&quot;&gt;System Architecture&lt;/h2&gt;

&lt;p&gt;To demonstrate radio communication relay, a small UAV was constructed using 2 UAVs and a Ground Control Station, which we call “Mini GCS”. As shown in Fig.2, names are given to the UAVs: Mom is the one that relays communication at the middle, and Son is the one that actually executes the mission. Fig.3 shows the critical subsystems of the demonstration UAV system.&lt;/p&gt;

&lt;figure class=&quot;half&quot;&gt;
    &lt;a href=&quot;/images/2016-05-30-UAV-Communication-Relay-for-another-UAV/mom_son.png&quot;&gt;&lt;img src=&quot;/images/2016-05-30-UAV-Communication-Relay-for-another-UAV/mom_son.png&quot; /&gt;&lt;/a&gt;
    &lt;a href=&quot;/images/2016-05-30-UAV-Communication-Relay-for-another-UAV/sys_block.png&quot;&gt;&lt;img src=&quot;/images/2016-05-30-UAV-Communication-Relay-for-another-UAV/sys_block.png&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;Fig.2 (Left) Mom, Son, and Mini GCS&lt;/figcaption&gt;
    &lt;figcaption&gt;Fig.3 (Right) Subsystems&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p style=&quot;text-align: center;&quot;&gt;&lt;strong&gt; Communication &lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;915MHz Radio telemetry by 3DR (3DR Radio) was used to construct the communication network. A total of 4 3DR Radios were used to establish 2 independent radio data links, one between &lt;span style=&quot;color:#008000&quot;&gt; Mom and GCS&lt;/span&gt;, and the other between &lt;span style=&quot;color:#008000&quot;&gt; Mom and Son&lt;/span&gt; (Fig.4). The 2 radio links are kept interference-free using the Frequency Hopping (FHSS) technique, which is a built-in feature of 3DR Radio. The 2 radio links use different frequency hopping sequence, which are determined by a unique “Net ID” (shown in Fig.5).&lt;/p&gt;

&lt;figure class=&quot;third&quot;&gt;
    &lt;a href=&quot;/images/2016-05-30-UAV-Communication-Relay-for-another-UAV/radio.png&quot;&gt;&lt;img src=&quot;/images/2016-05-30-UAV-Communication-Relay-for-another-UAV/radio.png&quot; /&gt;&lt;/a&gt;
    &lt;a href=&quot;/images/2016-05-30-UAV-Communication-Relay-for-another-UAV/radio_setting.png&quot;&gt;&lt;img src=&quot;/images/2016-05-30-UAV-Communication-Relay-for-another-UAV/radio_setting.png&quot; /&gt;&lt;/a&gt;
    &lt;a href=&quot;/images/2016-05-30-UAV-Communication-Relay-for-another-UAV/frame.png&quot;&gt;&lt;img src=&quot;/images/2016-05-30-UAV-Communication-Relay-for-another-UAV/frame.png&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;Fig.4 (Left) Radio Communication Architecture&lt;/figcaption&gt;
    &lt;figcaption&gt;Fig.5 (Mid) Frequency Hopping Settings&lt;/figcaption&gt;
    &lt;figcaption&gt;Fig.6 (Right) Format of Data Frame&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;In order to detect errors in data transmission, a Cyclic Redundancy Checking (CRC) error checking stage was added. To do this, data is organized into frames, and the frames have fixed format (Fig.6). At then end of each frame, a 4-byte CRC code is attached. When a frame is received by UAV or GCS, the receiver will first record the CRC code received over radio (CRC_remote), and then compute a new CRC code based on the received data (CRC_local). If CRC_remote is equal to CRC_local, then the frame is error-free. Otherwise, the received frame has error(s) in it and has to be discarded. More details about CRC can be found &lt;a href=&quot;https://en.wikipedia.org/wiki/Cyclic_redundancy_check&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p style=&quot;text-align: center;&quot;&gt;&lt;strong&gt; Mission Control &lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;This mission control unit is used to do a number of jobs:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;It handles message routing and communication relay.&lt;/li&gt;
  &lt;li&gt;It interfaces GCS to flight controller. User can send relatively simple commands from GCS, then mission control translates them into the low-level instructions to the flight controller.&lt;/li&gt;
  &lt;li&gt;It is supposed to control the mission with intelligence, sadly we still haven’t implemented that (will we ?).&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;The mission control unit is in fact a software system, developed with &lt;a href=&quot;http://www.ros.org/&quot;&gt;ROS&lt;/a&gt;, than runs on a &lt;a href=&quot;https://www.raspberrypi.org/products/raspberry-pi-2-model-b/&quot;&gt;Raspberry Pi 2B&lt;/a&gt;. The mission control unit communicates with radio telemetries and flight controller through UART ports. So it means as long as you are using a UAV with supported flight controller (in our case, the &lt;a href=&quot;https://pixhawk.org/choice&quot;&gt;PixHawk Flight Controller&lt;/a&gt;), then you can plug this mission control unit into it and turn it into an on-air communication relay station! The system is totally platform independent, which is cool and convenient.&lt;/p&gt;

&lt;p style=&quot;text-align: center;&quot;&gt;&lt;strong&gt; Flight Control &amp;amp; Aircraft &lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;There is nothing very special with the actual aircraft used. For testing, we built 2 quad-rotor copters out of off-the-shelf components, and used them as Mom and Son. For flight controller, we selected &lt;a href=&quot;https://pixhawk.org/choice&quot;&gt;PixHawk Flight Controller&lt;/a&gt; because it is powerful and plenty of resources are available online. Fig.8 shows the UAVs during a field flight test.&lt;/p&gt;

&lt;figure class=&quot;half&quot;&gt;
    &lt;a href=&quot;/images/2016-05-30-UAV-Communication-Relay-for-another-UAV/mission-control.png&quot;&gt;&lt;img src=&quot;/images/2016-05-30-UAV-Communication-Relay-for-another-UAV/mission-control.png&quot; /&gt;&lt;/a&gt;
    &lt;a href=&quot;/images/2016-05-30-UAV-Communication-Relay-for-another-UAV/test.png&quot;&gt;&lt;img src=&quot;/images/2016-05-30-UAV-Communication-Relay-for-another-UAV/test.png&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;Fig.7 (Left) Mission Control Unit Mounted on UAV&lt;/figcaption&gt;
    &lt;figcaption&gt;Fig.8 (Right) UAV Mom and Son, during a test&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p style=&quot;text-align: center;&quot;&gt;&lt;strong&gt; Ground Control Station (GCS) &lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;We developed our own version of GCS software, which we call “Mini GCS”. It was writen fully in-house using C#. A screen shoot is given in Fig.9 The Mini GCS has a number of cool features:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;A UAV status window, which allows you to monitor BOTH UAVs at the same time.&lt;/li&gt;
  &lt;li&gt;A map display, that shows the location of both UAVs in real time.&lt;/li&gt;
  &lt;li&gt;A Linux command line style interface, in which you can type commands and send them to the UAV that you specify, Mom or Son.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;A number of useful commands:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;arm              be ready to fly, engage motors
takeoff	         takeoff and fly to specified height
land             land immediately
setmode          change to flight mode of the UAV
rtl              return to home position, and land there
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;figure&gt;
    &lt;a href=&quot;/images/2016-05-30-UAV-Communication-Relay-for-another-UAV/mini-gcs.png&quot;&gt;&lt;img src=&quot;/images/2016-05-30-UAV-Communication-Relay-for-another-UAV/mini-gcs.png&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;Fig.9 Mini GCS screen shoot (UAVs not yet displayed on map)&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h2 id=&quot;testing-and-results&quot;&gt;Testing and results&lt;/h2&gt;

&lt;p&gt;The video below shows how we tested the communication relay function. First, we let “Son” fly far enough so radio communication with GCS breaks (because radio telemetries are out of range). Then, we deploy “Mom” to serve as relay, after which radio communication of “Son” with GCS resumes. Communication status is indicated by the “Connected/Disconnected” icon	 in the bottom-right corner of the video, which turns &lt;span style=&quot;color:#00F000&quot;&gt;Green&lt;/span&gt; when communication is healthy, and turns &lt;span style=&quot;color:#F00000&quot;&gt;Red&lt;/span&gt; when communication breaks.&lt;/p&gt;

&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/HxN0oafNmzw&quot; frameborder=&quot;0&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;
&lt;p&gt;+&lt;/p&gt;

&lt;p&gt;Fig.10 shows the variation of the radio’s signal and noise levels between “Son” and GCS during a typical mission (measurements not taken during the test shown in the video, but during a later test). As we can see, from t = 0 to t = t1, as “Son” started its mission and its distance to GCS increased, radio signal level dropped steadily. At t = t1, the radio signal level was almost equal to the noise level, implying a lost to radio communication. At this moment, “Mom” was started and deployed to the designated relay position (between “Son” and GCS). as “Mom” approached “Son” and the relay started to function, the signal level gradually rose again. At t = t2, signal level was above noise level, implying that radio communication between “Son” and GCS was re-established.&lt;/p&gt;

&lt;figure&gt;
    &lt;a href=&quot;/images/2016-05-30-UAV-Communication-Relay-for-another-UAV/RSSI.png&quot;&gt;&lt;img src=&quot;/images/2016-05-30-UAV-Communication-Relay-for-another-UAV/RSSI.png&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;Fig.10 Radio signal &amp;amp; noise level, between &quot;Son&quot; and GCS&lt;/figcaption&gt;
&lt;/figure&gt;

</content>
<category term="tech" />
<summary>This project is my undergraduate final year project, and I wrote my undergraduate thesis out of it. Hopefully this short article will give you a brief idea about what I’ve done. This project was a teamwork, I could not complete it without my team mates Cai Lingfeng and Wan Hiu Fung. I would also like to thank our supervisor Prof Wen Chih Yung, an absolutely nice and helpful prof.</summary>
</entry>
<entry>
<title>First Post</title>
<link href="/post/try/" rel="alternate" type="text/html" title="First Post" />
<published>2016-04-25T00:00:00+02:00</published>
<updated>2016-04-25T00:00:00+02:00</updated>
<id>/post/try</id>
<content type="html" xml:base="/post/try/">&lt;p&gt;Hey guys. I am trying to construct a personal homepage, and this is my very first post. GitHub provids a really convenient place to host my homepage, and Jekyll is making the development easy.&lt;/p&gt;

&lt;p&gt;Building a homepage requires consistent efforts. I will try to add interesting things to it bit by bit, and hopefully one day this homepage will become lively and interesting.&lt;/p&gt;

&lt;p&gt;Don’t be surprised to see posts earlier than this “First Post”, because when I move old stuff into this website, I’ll keep the original date.&lt;/p&gt;

</content>
<category term="life" />
<summary>Hey guys. I am trying to construct a personal homepage, and this is my very first post. GitHub provids a really convenient place to host my homepage, and Jekyll is making the development easy.</summary>
</entry>
<entry>
<title>Building a 3-Phase Servo Motor Driver</title>
<link href="/post/Servo-Motor-Driver-Project/" rel="alternate" type="text/html" title="Building a 3-Phase Servo Motor Driver" />
<published>2014-05-10T00:00:00+02:00</published>
<updated>2014-05-10T00:00:00+02:00</updated>
<id>/post/Servo-Motor-Driver-Project</id>
<content type="html" xml:base="/post/Servo-Motor-Driver-Project/">&lt;p&gt;In the past few months I was intensively exposed to servo motors: their constructions, working principles, and driving circuits, thanks to my internship. These motors are brushless, driven by 3-phase AC currents, and when properly controlled (as in my internship company), can execute motion with nanometer-level of resolution. The science and technology behind these motors deeply fascinated me, which inspired me to try building my own 3-phase servo motor driver, one of the core components in the motor’s control.&lt;/p&gt;

&lt;p&gt;The 3-phase servo motor driver is essentially a 3-phase DC-to-AC converter, which provides current measurement and feedback for control purpose. The major functional blocks of the driver are as follows:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;3-Phase MOSFET inverter and MOSFET gate drivers.&lt;/li&gt;
  &lt;li&gt;Phase Current Sensing.&lt;/li&gt;
  &lt;li&gt;Power Supply System.&lt;/li&gt;
  &lt;li&gt;Feedback Signal Conditioning &amp;amp; ADC (Optional).&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;In addition, this driver will also provide complete isolation between high-power circuit and MCU control circuit (MCU control circuit is external to the driver).&lt;/p&gt;

&lt;h3 id=&quot;the-3-phase-inverter&quot;&gt;The 3-Phase Inverter&lt;/h3&gt;

&lt;p&gt;The 3-phase inverter circuit consists of 3 half-bridge circuits, which controls the 3 phases of the motor. Each half-bridge is made up of 2 MOSFETs (I used Fairchild 40N25). the inverter circuit is shown in Fig.1. The inverter is powered from V+, which is the motor’s power supply with user-defined voltage (according to needs, max 100V DC).&lt;/p&gt;

&lt;p&gt;Because both high- and low-side of the half-bridge uses N-channel MOSFET, and becuase of the characteristics of N-Channel MOSFET, a gate driving circuit becomes necessary. I used IR2183 integrated half-bridge driver to do this job. The driver circuit (for one phase only) is shown in Fig.2. Opto-coupler HCPL0630 was used to isolate the high-power driver circuit from MCU. Sorry but please notice that value of R7 and R8 shown in Fig.2 (1K ohm) is &lt;span style=&quot;color:#F00000&quot;&gt;WRONG&lt;/span&gt; because I misunderstood some datasheets. The value for R7 and R8 in the final design is 330 ohm.&lt;/p&gt;

&lt;figure class=&quot;half&quot;&gt;
    &lt;a href=&quot;/images/2014-05-10-Servo-Motor-Driver-Project/inverter.png&quot;&gt;&lt;img src=&quot;/images/2014-05-10-Servo-Motor-Driver-Project/inverter.png&quot; /&gt;&lt;/a&gt;
    &lt;a href=&quot;/images/2014-05-10-Servo-Motor-Driver-Project/gate-driver.png&quot;&gt;&lt;img src=&quot;/images/2014-05-10-Servo-Motor-Driver-Project/gate-driver.png&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;Fig.1 (Left) 3-Phase Inverter&lt;/figcaption&gt;
    &lt;figcaption&gt;Fig.2 (Right) MOSFET Gate Driver (1 phase only, same for all 3 phases)&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;To make sure the design works, I built a prototype of the inverter circuit (1 phase only) and tested it (shown in Fig.3 and Fig.4). Fig.4 shows the halg-bridge switching an inductive load with approx. 70% duty. The MOSFET gate driver circuit (Fig.2) does not operate when PWM duty is below approx. 3% or above approx 95%.&lt;/p&gt;

&lt;figure class=&quot;half&quot;&gt;
    &lt;a href=&quot;/images/2014-05-10-Servo-Motor-Driver-Project/test-gate-driver-1.jpg&quot;&gt;&lt;img src=&quot;/images/2014-05-10-Servo-Motor-Driver-Project/test-gate-driver-1.jpg&quot; /&gt;&lt;/a&gt;
    &lt;a href=&quot;/images/2014-05-10-Servo-Motor-Driver-Project/test-gate-driver-2.jpg&quot;&gt;&lt;img src=&quot;/images/2014-05-10-Servo-Motor-Driver-Project/test-gate-driver-2.jpg&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;Fig.3 (Left) Test Setup&lt;/figcaption&gt;
    &lt;figcaption&gt;Fig.4 (Right) MOSFET Switching Waveform&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h3 id=&quot;phase-current-sensing&quot;&gt;Phase Current Sensing&lt;/h3&gt;

&lt;p&gt;The job of the current sensing circuit is to accurately measure the amount of current flowing in each phase. The measurement is then provided MCU, which executes a close-loop control algorithm that controls the current flow in phases (the current loop). I used LTSR-25NP current transducer to sense the phase currents. LTSR-25NP is a hall-effect current censor, and its output is completely isolated from the current that it measures. It helps isolate high- and low-power parts of the driver board.&lt;/p&gt;

&lt;h3 id=&quot;power-supply-system&quot;&gt;Power Supply System&lt;/h3&gt;

&lt;p&gt;In my driver, the motor is powered from V+ (user-defined, max 100V DC). However, the rest of the system: MOSFET gate drivers, current sensors, etc, are powered from a separate power source, fixed at 24V DC. This 24V voltage is converted by switch-mode voltage regulators into 2 different voltages:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;15V: power supply to MOSTEF gate drivers&lt;/li&gt;
  &lt;li&gt;5V: for high-power circuits that needs 5V supply (e.g. opto-isolator, high-power side).&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;In addition, there is another 5V linear regulator, which supplies power for low-power circuits that needs 5V: opto-isolator low-power side, current transducers, etc.&lt;/p&gt;

&lt;p&gt;An additional 5V voltage, VREF, is provided by REF195 (by Analog Devices). this is the precision voltage reference for an the onboard ADC (which was never tested, sadly)&lt;/p&gt;

&lt;p&gt;The power supply curcuit is shown in Fig.6.&lt;/p&gt;

&lt;figure&gt;
    &lt;a href=&quot;/images/2014-05-10-Servo-Motor-Driver-Project/power-supply.png&quot;&gt;&lt;img src=&quot;/images/2014-05-10-Servo-Motor-Driver-Project/power-supply.png&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;Fig.6 Power Supply&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h3 id=&quot;feedback--signal-conditioning--adc&quot;&gt;Feedback  Signal Conditioning &amp;amp; ADC&lt;/h3&gt;

&lt;p&gt;to be added&lt;/p&gt;

&lt;h3 id=&quot;pcb-design&quot;&gt;PCB Design&lt;/h3&gt;

&lt;p&gt;My driver board features 4-layer PCB, with middle layers dedicated to GND and power supply. In the layout I paid attention to keep the ground panel for high- and low-power circuits separated. Total isolation is achieved by using opto-isolators and isolated current sensors. The Layers are shown in Fig.7 ~ Fig.10, and the completed PCB is shown in Fig.11(front side) and Fig.12(back side).&lt;/p&gt;

&lt;figure class=&quot;half&quot;&gt;
    &lt;a href=&quot;/images/2014-05-10-Servo-Motor-Driver-Project/L1.png&quot;&gt;&lt;img src=&quot;/images/2014-05-10-Servo-Motor-Driver-Project/L1.png&quot; /&gt;&lt;/a&gt;
    &lt;a href=&quot;/images/2014-05-10-Servo-Motor-Driver-Project/supply.png&quot;&gt;&lt;img src=&quot;/images/2014-05-10-Servo-Motor-Driver-Project/supply.png&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;Fig.7 (Left) Front Side Gerber&lt;/figcaption&gt;
    &lt;figcaption&gt;Fig.8 (Right) Supply Layer Gerber&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&quot;half&quot;&gt;
    &lt;a href=&quot;/images/2014-05-10-Servo-Motor-Driver-Project/gnd.png&quot;&gt;&lt;img src=&quot;/images/2014-05-10-Servo-Motor-Driver-Project/gnd.png&quot; /&gt;&lt;/a&gt;
    &lt;a href=&quot;/images/2014-05-10-Servo-Motor-Driver-Project/L4.png&quot;&gt;&lt;img src=&quot;/images/2014-05-10-Servo-Motor-Driver-Project/L4.png&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;Fig.9 (Left) Ground Panel Gerber&lt;/figcaption&gt;
    &lt;figcaption&gt;Fig.10 (Right) Back Side Gerber&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&quot;half&quot;&gt;
    &lt;a href=&quot;/images/2014-05-10-Servo-Motor-Driver-Project/front-detail.png&quot;&gt;&lt;img src=&quot;/images/2014-05-10-Servo-Motor-Driver-Project/front-detail.png&quot; /&gt;&lt;/a&gt;
    &lt;a href=&quot;/images/2014-05-10-Servo-Motor-Driver-Project/back-detail.png&quot;&gt;&lt;img src=&quot;/images/2014-05-10-Servo-Motor-Driver-Project/back-detail.png&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;Fig.11 (Left) Finished PCB, Front Side&lt;/figcaption&gt;
    &lt;figcaption&gt;Fig.12 (Right) Finished PCB, Back Side&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Fig.13 shows the finished motor driver in use, driving a brushed DC motor (only one of the 3 phases are used).&lt;/p&gt;
&lt;figure&gt;
    &lt;a href=&quot;/images/2014-05-10-Servo-Motor-Driver-Project/test-product.jpg&quot;&gt;&lt;img src=&quot;/images/2014-05-10-Servo-Motor-Driver-Project/test-product.jpg&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;Fig.13 Driving a Brushed DC Motor&lt;/figcaption&gt;
&lt;/figure&gt;
</content>
<category term="tech" />
<category term="DIY" />
<category term="hobby" />
<summary>In the past few months I was intensively exposed to servo motors: their constructions, working principles, and driving circuits, thanks to my internship. These motors are brushless, driven by 3-phase AC currents, and when properly controlled (as in my internship company), can execute motion with nanometer-level of resolution. The science and technology behind these motors deeply fascinated me, which inspired me to try building my own 3-phase servo motor driver, one of the core components in the motor’s control.</summary>
</entry>
<entry>
<title>Learning Logic Circuits with Minecraft</title>
<link href="/post/Minecraft/" rel="alternate" type="text/html" title="Learning Logic Circuits with Minecraft" />
<published>2013-06-10T00:00:00+02:00</published>
<updated>2013-06-10T00:00:00+02:00</updated>
<id>/post/Minecraft</id>
<content type="html" xml:base="/post/Minecraft/">&lt;p&gt;I’m not a game person, and I rarely play games. However, there’s one game to which I’m particularly addicted: Minecraft!!!&lt;/p&gt;

&lt;p&gt;Minecraft is a game which allows you to build things in it, using pre-defined blocks. There are so many types of blocks and so many ways to combine them that there is virtually no limit on what you can build: houses, gardens, weapons, trains, and even computers! Minecraft has so many interesting aspects, find out by yourself at &lt;a href=&quot;https://minecraft.net/&quot;&gt;their homepage&lt;/a&gt;!&lt;/p&gt;

&lt;p&gt;At some point, I noticed how interesting it was to construct logic circuits in minecraft. After some experiments, I built my first logic gate! (Fig.1) However, my own design was too bulky, so I just adopted logic gates provided in Minecraft’s official Wiki.&lt;/p&gt;

&lt;p&gt;Fig.2 shows a 8-bit binary adder, and Fig.3 shows a 4-bit binary multiplier, both “designed in-house”. I had a plan to build a simple functioning calculator, but never had time to complete it. Don’t be surprised about the animals that are walking on the circuits, they are auto-generated by the game and do not do any harm.&lt;/p&gt;

&lt;figure class=&quot;third&quot;&gt;
    &lt;a href=&quot;/images/2013-06-10-Minecraft/gate.png&quot;&gt;&lt;img src=&quot;/images/2013-06-10-Minecraft/gate.png&quot; /&gt;&lt;/a&gt;
    &lt;a href=&quot;/images/2013-06-10-Minecraft/adder.png&quot;&gt;&lt;img src=&quot;/images/2013-06-10-Minecraft/adder.png&quot; /&gt;&lt;/a&gt;
    &lt;a href=&quot;/images/2013-06-10-Minecraft/multiplier.png&quot;&gt;&lt;img src=&quot;/images/2013-06-10-Minecraft/multiplier.png&quot; /&gt;&lt;/a&gt;
    &lt;figcaption&gt;Fig.1 (Left) OR gate, my design&lt;/figcaption&gt;
    &lt;figcaption&gt;Fig.2 (Mid) 8-bit binary adder/subtractor&lt;/figcaption&gt;
    &lt;figcaption&gt;Fig.3 (Right) 4-bit binary multiplier&lt;/figcaption&gt;
&lt;/figure&gt;
</content>
<category term="life" />
<category term="hobby" />
<summary>I’m not a game person, and I rarely play games. However, there’s one game to which I’m particularly addicted: Minecraft!!!</summary>
</entry>
</feed>
